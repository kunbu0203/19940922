$(async function(){const a=document.querySelector("[data-camera-video]"),m=document.querySelector("[data-camera-canvas]"),g=m.getContext("2d");let t;const w=new Image;w.src="./assets/image/touch/logo.png",navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:2400},height:{ideal:3200}}}).then(function(e){t=e,a.srcObject=e}).catch(function(e){alert("取得相機訪問權限失敗: ",e.message,e.name)});new Promise((e,t)=>{a.addEventListener("loadeddata",function(){m.width=a.videoWidth,m.height=a.videoHeight,e()},!1)});await 0;const e=new FaceMesh({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${e}`});e.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),e.onResults(function(s){requestAnimationFrame(()=>{if(g.clearRect(0,0,m.width,m.height),g.save(),g.translate(m.width,0),g.scale(-1,1),g.drawImage(s.image,0,0,m.width,m.height),s.multiFaceLandmarks&&0<s.multiFaceLandmarks.length){var n=s.multiFaceLandmarks[0];let e=1/0,t=1/0,a=-1/0,i=-1/0;for(const r of n){var d=r.x*m.width,o=r.y*m.height;e=Math.min(e,d),t=Math.min(t,o),a=Math.max(a,d),i=Math.max(i,o)}var c=(a-e)*(i-t),h=Math.max(.2,c/1e5),c=n[10],n=c.x*m.width,c=c.y*m.height;g.drawImage(w,n-.3*window.innerWidth*h/2,c-.3*window.innerWidth*h-20,.3*window.innerWidth*h,.3*window.innerWidth*h)}g.restore()})});const i=new Camera(a,{onFrame:async()=>{await e.send({image:a})},width:a.videoWidth,height:a.videoHeight,facingMode:"user"});i.start()});
//# sourceMappingURL=main2.min.js.map
