$(function(){const t=document.querySelector("[data-camera-video]"),m=document.querySelector("[data-camera-canvas]"),g=m.getContext("2d");let a,e=!0;const l=new Image;function i(){navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){a=e,t.srcObject=e}).catch(function(e){alert("取得相機訪問權限失敗: ",e.message,e.name)})}l.src="./assets/image/touch/logo.png",i(),t.addEventListener("loadeddata",function(){m.width=t.videoWidth,m.height=t.videoHeight},!1),$("[data-camera-direction]").on("click",function(){a.getTracks().forEach(e=>e.stop()),e=!e,i()});const n=new FaceMesh({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${e}`});n.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),n.onResults(function(h){requestAnimationFrame(()=>{if(g.clearRect(0,0,m.width,m.height),g.save(),e&&(g.translate(m.width,0),g.scale(-1,1)),g.drawImage(h.image,0,0,m.width,m.height),h.multiFaceLandmarks&&0<h.multiFaceLandmarks.length){var n=h.multiFaceLandmarks[0];let e=1/0,t=1/0,a=-1/0,i=-1/0;for(const s of n){var c=s.x*m.width,d=s.y*m.height;e=Math.min(e,c),t=Math.min(t,d),a=Math.max(a,c),i=Math.max(i,d)}var o=(a-e)*(i-t),r=Math.max(.2,o/1e5),o=n[10],n=o.x*m.width,o=o.y*m.height;g.drawImage(l,n-.7*m.width*r/2,o-.7*m.width*r-20,.7*m.width*r,.7*m.width*r)}g.restore()})});const c=new Camera(t,{onFrame:async()=>{await n.send({image:t})},width:{ideal:1968},height:{ideal:2700},facingMode:e?"user":"environment"});c.start()});
//# sourceMappingURL=main2.min.js.map
