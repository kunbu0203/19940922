$(async function(){const t=document.querySelector("[data-camera-video]"),r=document.querySelector("[data-camera-canvas]"),g=r.getContext("2d");let a;const l=new Image;l.src="./assets/image/touch/logo.png",navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:2400},height:{ideal:3200}}}).then(function(e){a=e,t.srcObject=e}).catch(function(e){alert("取得相機訪問權限失敗: ",e.message,e.name)});new Promise((e,a)=>{t.addEventListener("loadeddata",function(){r.width=t.videoWidth,r.height=t.videoHeight,e()},!1)});await 0;const e=new FaceMesh({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${e}`});e.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),e.onResults(function(m){requestAnimationFrame(()=>{if(g.clearRect(0,0,r.width,r.height),g.save(),g.translate(r.width,0),g.scale(-1,1),g.drawImage(m.image,0,0,r.width,r.height),m.multiFaceLandmarks&&0<m.multiFaceLandmarks.length){var n=m.multiFaceLandmarks[0];let e=1/0,a=1/0,t=-1/0,i=-1/0;for(const h of n){var d=h.x*r.width,c=h.y*r.height;e=Math.min(e,d),a=Math.min(a,c),t=Math.max(t,d),i=Math.max(i,c)}var s=(t-e)*(i-a),o=Math.max(50,s/1e3),s=n[10],n=s.x*r.width,s=s.y*r.height;g.drawImage(l,n-o/2,s-o-20,o,o)}g.restore()})});const i=new Camera(t,{onFrame:async()=>{await e.send({image:t})},width:t.videoWidth,height:t.videoHeight,facingMode:"user"});i.start()});
//# sourceMappingURL=main2.min.js.map
